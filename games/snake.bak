uses crt;
var
    x,y,vx,vy: integer;
    ch: char;
    doubx: integer;
    textx, texty: integer;
    score, scX, scY, count: longint;
    time: integer;
    i: integer;
    exp: longint;
    tx: integer;
begin

    clrscr;
    doubx := 1;
    tx := 2 div 2;
    x := 5;
    y := 25 div 2;
    textx := 2 div 2;
    texty := 1;
    scX := 15;
    scY := 15;
    gotoxy (1,1);
    textcolor (12);
    i := 0;
    writeln('###############################################################################');
    gotoxy (doubx,24);
    writeln('###############################################################################');
    //Start of boka
    gotoxy (tx, 2);
    write ('#');
    gotoxy (tx, 3);
    write ('#');
    gotoxy (tx, 4);
    write ('#');
    gotoxy (tx, 5);
    write ('#');
    gotoxy (tx, 6);
    write ('#');
    gotoxy (tx, 7);
    write ('#');
    gotoxy (tx, 8);
    write ('#');
    gotoxy (tx, 9);
    write ('#');
    gotoxy (tx, 10);
    write ('#');
    gotoxy (tx, 11);
    write ('#');
    gotoxy (tx, 12);
    write ('#');
    gotoxy (tx, 13);
    write ('#');
    gotoxy (tx, 14);
    write ('#');
    gotoxy (tx, 15);
    write ('#');
    gotoxy (tx, 16);
    write ('#');
    gotoxy (tx, 17);
    write ('#');
    gotoxy (tx, 18);
    write ('#');
    gotoxy (tx, 19);
    write ('#');
    gotoxy (tx, 20);
    write ('#');
    gotoxy (tx, 21);
    write ('#');
    gotoxy (tx, 22);
    write ('#');
    gotoxy (tx, 23);
    write ('#');
    gotoxy (79, 2);
    write ('#');
    gotoxy (79, 3);
    write ('#');
    gotoxy (79, 4);
    write ('#');
    gotoxy (79, 5);
    write ('#');
    gotoxy (79, 6);
    write ('#');
    gotoxy (79, 7);
    write ('#');
    gotoxy (79, 8);
    write ('#');
    gotoxy (79, 9);
    write ('#');
    gotoxy (79, 10);
    write ('#');
    gotoxy (79, 11);
    write ('#');
    gotoxy (79, 12);
    write ('#');
    gotoxy (79, 13);
    write ('#');
    gotoxy (79, 14);
    write ('#');
    gotoxy (79, 15);
    write ('#');
    gotoxy (79, 16);
    write ('#');
    gotoxy (79, 17);
    write ('#');
    gotoxy (79, 18);
    write ('#');
    gotoxy (79, 19);
    write ('#');
    gotoxy (79, 20);
    write ('#');
    gotoxy (79, 21);
    write ('#');
    gotoxy (79, 22);
    write ('#');
    gotoxy (79, 23);
    write ('#');
    //End of boka
    //Start of usl
    gotoxy (19, 13);
    write ('##');
    gotoxy (20, 14);
    write ('#');
    //End of usl
    while i = 0 do begin
        gotoxy (textx, texty);
        textcolor (10);
        write ('Score:', score, ' ');
        gotoxy(x,y);
        textcolor(11);
        write('@');
        delay(60);
        if (count = 0) then begin
           scX := random(78) + 1;
           scY := random(20) + 1;
           gotoxy (scX, scY);
           textcolor (14);
           write ('*');
           count := 1;
        end;
        if (y=24) or (y = 1) or (x = tx) or (x=79) or (x = 19) and (y = 13) or (x = 20) and (y = 14) or (x = 20) and (y = 13) then begin
           gotoxy (5, 3);
           writeln ('Game over! You get exp: ', exp);
           gotoxy (10, 4);
           writeln ('You lost score: ', score);
           delay (10000);
           gotoxy (10, 6);
           writeln ('Press any key to close game...');
           readkey();
           break;
        end;
        if (x = scX) and (y = scY) then begin
           score := score + 1;
           exp := exp + random (158) + 2;
           count := 0;
        end;
        if keypressed then begin
            ch := readkey;
            case ch of
                'd':begin vx:=1; vy:=0 end;
                'a':begin vx:=-1; vy:=0 end;
                'w':begin vx:=0; vy:=-1 end;
                's':begin vx:=0; vy:=1 end;
                'D':begin vx:=1; vy:=0 end;
                'A':begin vx:=-1; vy:=0 end;
                'W':begin vx:=0; vy:=-1 end;
                'S':begin vx:=0; vy:=1 end;
                '¢':begin vx:=1; vy:=0 end;
                'ä':begin vx:=-1; vy:=0 end;
                'æ':begin vx:=0; vy:=-1 end;
                'ë':begin vx:=0; vy:=1 end;
                '‚':begin vx:=1; vy:=0 end;
                '”':begin vx:=-1; vy:=0 end;
                '–':begin vx:=0; vy:=-1 end;
                '›':begin vx:=0; vy:=1 end;
                'p': begin textcolor(11); gotoxy(5, 3); writeln ('Game paused... press any key to start'); readkey; gotoxy (5, 3); write ('                                     '); end;
                'P': begin textcolor(11); gotoxy(5, 3); writeln ('Game paused... press any key to start'); readkey; gotoxy (5, 3); write ('                                     '); end;
                '‡': begin textcolor(11); gotoxy(5, 3); writeln ('Game paused... press any key to start'); readkey; gotoxy (5, 3); write ('                                     '); end;
                '§': begin textcolor(11); gotoxy(5, 3); writeln ('Game paused... press any key to start'); readkey; gotoxy (5, 3); write ('                                     '); end;
                end;
        gotoxy(x,y);
        write(' ');
        end;
    inc(x,vx);
    inc(y,vy);

end;
end.
end.
